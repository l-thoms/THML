# **THML Handwritten Markup Language**
<img src="THMarkup.jpg" height="100" width = "100"/> \
[[English](Readme.md)|[简体中文](Readme.zh_CN.md)] \
THML 是只使用冒號 (:)、點號 (.)、 反斜線 (\\) 和分號 (;) 四種符號作為基本符號的標記語言。注重易寫性與自由度。\
目前版本為 v0.1.0，仍處於初期開發階段，僅保留最基本的功能。以後可能會增加或更改某些特性。\
## 目錄
* [說明](#說明)
* [物件類型](#物件類型)
* [字串](#字串)
* [注釋](#注釋)
* [縮進控制](#縮進控制)
* [副檔名](#副檔名)
* [可用的解析器](#可用的解析器)
## 說明
* THML 必須為有效的 UTF-8 編碼的 Unicode 文檔。
* THML 對大小寫敏感。
* 空白指一般空白 (0x20) 或定位字元 (0x19)
* 換行指 LF (0x0A)、CR (0x0D) 或 CRLF (0x0D0A)

## 物件類型 
物件類型包括文檔 (Document) 、一般物件 (Object) 、清單 (List) 和清單項 (ListItem)。
### 文檔物件
文檔物件為整個文檔的根物件，一般在解析器裡體現。
### 一般物件
物件的一般表現為鍵值對，表現形式為 `key:value;`。鍵和值之間用冒號分割，值位於冒號和分號之間。\
鍵名必須為字串，只要符合規則，對名稱要求沒有限制。詳細規則請見[字串](#字串)。

    name: clear; \..建議使用較為簡單的名稱
    一二: 三四; \..可行
    \ \: empty; \..名稱為空字串，可行，但不建議
    one two: three; \..錯誤，名稱不符合規範
值可以為字串、一般物件或清單，可以為多個物件，物件和字串不可共存。

    store:
        owner: Mike;
        fruit: apple.. orange.. banana;
    ;
允許定義重名物件。

    number: one;
    number: two;
若想表示多個字串，請使用[清單和清單項](#清單和清單項)類型。

### 清單和清單項
清單的子物件必須為清單項，清單項的父物件也必須為清單。\
清單的命名規則與一般物件相同，清單項不允許擁有名稱，值規則與一般物件相同。\
不同清單項以 `..` 分隔。

    list:
        item1: 1; ..
        2..
        item3: 3; item3.2: 3.2;
    ;
若清單只有一個項，則在名稱後面加`..`聲明。

    singleItem..: single;
若清單寫成空白，則解析時默認認為包含一個空白項。

    emptylist..: ;
## 字串
字串表示方法有一般類型 (Normal)，單斜杠類型 (Single) 和多斜杠類型 (Multiple)。\
每個類型都支援多行文本。\
字串的注釋規則和縮進規則詳見[注釋](#注釋)和[縮進控制](#縮進控制)。
### 一般類型
一般類型字串無起始和結束標記。字元前後空格和換行會被忽略。

    \.它們的意義是相同的.\
    foo: bar;
    foo:
        bar
    ;
一般類型字串遵循注釋規則，不遵循縮進規則。每行前的所有空白會直接忽略。

    \.它們的意義是相同的.\
    multiline:
        1
        2
        3
    ;
    multiline:
        1\.Have comment.\
        2
        3
    ;
    multiline:
    1
        2
            3
    ;
一般類型字串欲嵌入冒號、反斜線和分號，請轉義。(`\:`、`\\` 和 `\;`)若要表示雙點號，請使用單斜杠和多斜杠類型。\
支持轉義 LF、CR 和 CRLF(`\.\`、`\.:\` 和 `\.;\`) (未來可能會將 CR 和 CRLF 的轉義方式簡化)\
用作名稱時，不允許含有注釋、空白和未經轉義的換行。
### 單斜杠類型
首尾均使用一個反斜線作為起始和結束標記。為避免歧義(如起始標記後緊接特殊符號)和方便多行書寫，起始斜杠後緊接的第一個空格或換行和結束斜杠前的第一個換行將會被忽略。按照這個規則：

    spaceOnly: \  \; \..表示空格
    empty: \ \; \..表示空字元

    \.它們仨的意義是相同的.\
    foo: \bar\;
    foo: \ bar\;
    foo: \
        bar
        \
    ;
單斜杠類型字串遵循注釋規則和縮進規則。

    \.它們倆的意義是相同的.\
    foo: \
        bar\..have
        Blat
        \
    ;
    foo: barBlat;

    \.基於縮進規則，它們倆的意義不同.\
    foo: \
        bar
        \
    ;
    foo: \
        bar
    \
    ;
單斜杠類型字串支援轉義反斜線和換行。冒號、分號無須轉義。
### 多斜杠類型
首尾均使用相同數量三個以上的奇數個斜杠作為起始和結束標記。為避免歧義(如起始標記後緊接反斜線)和方便多行書寫，起始斜杠後緊接的第一個空格或換行和結束斜杠前的空格或第一個換行將會被忽略。按照這個規則：

    empty: \\\ \\\;
    empty: \\\  \\\; \..都是表示空字元

    \.它們仨的意義是相同的.\
    foo: \\\bar\\\;
    foo: \\\ bar \\\;
    foo: \\\
        bar
        \\\
    ;
多斜杠類型字串不支援任何注釋和轉義，但支援縮進規則，方便存儲和書寫有縮進的文檔，同時不改變原有資訊和損失排版。

    C_Language: \\\
        #include <stdio.h>

        int main()
        {
            printf("Hello\n");
            return 0;
        }
        \\\
    ;
這有助於書寫 Python、YAML 等對縮進要求嚴格的語言。 \
若字串中有與起始與結束標記相同數量的連續多個反斜線，請改變起始與結束標記的反斜線數量。

    Triple: \\\ \\\ \\\; \..錯誤
    Triple: \\\\\ \\\ \\\\\; \..正確
## 注釋
注釋允許在名稱之前、名稱與冒號之間、物件值起始與末尾、作為值的一般類型字串和任何單斜杠類型字串等位置插入。\
單行注釋以 `\..` 表示。若位於字串中，會取消當前行的換行。\
多行注釋以 `\. .\` 表示。

    \..這是一個單行注釋
    \.這是一個多行注釋.\
## 縮進控制
THML規定一個定位字元最多佔用 4 個空格位置。對齊時以 4 個空格位置為一組。若行前空格位置數不能被 4 整除，則取比這個空格位置小的最大能被 4 整除的空格位置。\
字串對齊由字串的主體部分、起始和結束標記和注釋共同確定。一般取它們離行首最近的位置，此後字串以該位置對齊。

    t1:
        \
        tab1
        \
    ;
    t2:
        \
    tab2
        \
    ;
    t3:
    \
        tab3
    \
    ;
    t4:
        \
    \..comment
        tab4
        \
    ;
其中 t2、t3 和 t4的對齊位置相同，均為距離行首0個空格位置。 \
不建議將起始與結束斜杠放在主體內容對齊位置的後面。\
若起始標記左邊有非空白字元，則該標記不參與計算對齊。

    \.它們倆的意義相同.\
    foo: \
        bar
        \
    ;
    foo:
        \
        bar
        \
    ;
## 副檔名
　　建議將 `.th` 作為副檔名。
## 可用的解析器
* C# : [我的拙作: THMarkup](https://github.com/l-thoms/THMarkup) \
歡迎編寫更優質的解析器。
## ABNF
Coming soon.
$\color{transparent}{這裡的ABNF教程太少了，現還在努力研究ABNF，淦！希望有能之人能寫出ABNF語法說明。}$