# **THML Handwritten Markup Language**
<img src="THMarkup.jpg" height="100" width = "100"/> \
[[English](Readme.md)|[繁體中文](Readme.zh_TW.md)] \
THML 是只使用冒号 (:)、点号 (.)、 反斜杠 (\\) 和分号 (;) 四种符号作为基本符号的标记语言。注重易写性与自由度。\
目前版本为 v0.1.0，仍处于初期开发阶段，仅保留最基本的功能。以后可能会增加或更改某些特性。\
## 目录
* [说明](#说明)
* [对象类型](#对象类型)
* [字符串](#字符串)
* [注释](#注释)
* [缩进控制](#缩进控制)
* [扩展名](#扩展名)
* [可用的解析器](#可用的解析器)
## 说明
* THML文档 必须为有效的 UTF-8 编码的 Unicode 文档。
* THML 对大小写敏感。
* 空白指一般空白 (0x20) 或制表符 (0x19)
* 换行指 LF (0x0A)、CR (0x0D) 或 CRLF (0x0D0A)

## 对象类型 
对象类型包括文档 (Document) 、一般对象 (Object) 、列表 (List) 和列表项 (ListItem)。
### 文档对象
文档对象为整个文档的根对象，一般在解析器里体现。
### 一般对象
对象的一般表现为键值对，表现形式为 `key:value;`。键和值之间用冒号分割，值位于冒号和分号之间。\
键名必须为字符串，只要符合规则，对名称要求没有限制。详细规则请见[字符串](#字符串)。

    name: clear; \..建议使用较为简单的名称
    一二: 三四; \..可行
    \ \: empty; \..名称为空字符串，可行，但不建议
    one two: three; \..错误，名称不符合规范
值可以为字符串、一般对象或列表，可以为多个对象，对象和字符串不可共存。

    store:
        owner: Mike;
        fruit: apple.. orange.. banana;
    ;
允许定义重名对象。

    number: one;
    number: two;
若想表示多个字符串，请使用[列表和列表项](#列表和列表项)类型。

### 列表和列表项
列表的子对象必须为列表项，列表项的父对象也必须为列表。\
列表的命名规则与一般对象相同，列表项不允许拥有名称，值规则与一般对象相同。\
不同列表项以 `..` 分隔。

    list:
        item1: 1; ..
        2..
        item3: 3; item3.2: 3.2;
    ;
若列表只有一个项，则在名称后面加`..`声明。

    singleItem..: single;
若列表写成空白，则解析时默认认为包含一个空白项。

    emptylist..: ;
## 字符串
字符串表示方法有一般类型 (Normal)，单斜杠类型 (Single) 和多斜杠类型 (Multiple)。\
每个类型都支持多行文本。\
字符串的注释规则和缩进规则详见[注释](#注释)和[缩进控制](#缩进控制)。
### 一般类型
一般类型字符串无起始和结束标记。字符前后空格和换行会被忽略。

    \.它们的意义是相同的.\
    foo: bar;
    foo:
        bar
    ;
一般类型字符串遵循注释规则，不遵循缩进规则。每行前的所有空白会直接忽略。

    \.它们的意义是相同的.\
    multiline:
        1
        2
        3
    ;
    multiline:
        1\.Have comment.\
        2
        3
    ;
    multiline:
    1
        2
            3
    ;
一般类型字符串欲嵌入冒号、反斜杠和分号，请转义。(`\:`、`\\` 和 `\;`)若要表示双点号，请使用单斜杠和多斜杠类型。\
支持转义 LF、CR 和 CRLF(`\.\`、`\.:\` 和 `\.;\`) (未来可能会将 CR 和 CRLF 的转义方式简化)\
用作名称时，不允许含有注释、空白和未经转义的换行。
### 单斜杠类型
首尾均使用一个反斜杠作为起始和结束标记。为避免歧义(如起始标记后紧接特殊符号)和方便多行书写，起始斜杠后紧接的第一个空格或换行和结束斜杠前的第一个换行将会被忽略。按照这个规则：

    spaceOnly: \  \; \..表示空格
    empty: \ \; \..表示空字符

    \.它们仨的意义是相同的.\
    foo: \bar\;
    foo: \ bar\;
    foo: \
        bar
        \
    ;
单斜杠类型字符串遵循注释规则和缩进规则。

    \.它们俩的意义是相同的.\
    foo: \
        bar\..have
        Blat
        \
    ;
    foo: barBlat;

    \.基于缩进规则，它们俩的意义不同.\
    foo: \
        bar
        \
    ;
    foo: \
        bar
    \
    ;
单斜杠类型字符串支持转义反斜杠和换行。冒号、分号无须转义。
### 多斜杠类型
首尾均使用相同数量三个以上的奇数个斜杠作为起始和结束标记。为避免歧义(如起始标记后紧接反斜杠)和方便多行书写，起始斜杠后紧接的第一个空格或换行和结束斜杠前的空格或第一个换行将会被忽略。按照这个规则：

    empty: \\\ \\\;
    empty: \\\  \\\; \..都是表示空字符

    \.它们仨的意义是相同的.\
    foo: \\\bar\\\;
    foo: \\\ bar \\\;
    foo: \\\
        bar
        \\\
    ;
多斜杠类型字符串不支持任何注释和转义，但支持缩进规则，方便存储和书写有缩进的文档，同时不改变原有信息和损失排版。

    C_Language: \\\
        #include <stdio.h>

        int main()
        {
            printf("Hello\n");
            return 0;
        }
        \\\
    ;
这有助于书写 Python、YAML 等对缩进要求严格的语言。 \
若字符串中有与起始与结束标记相同数量的连续多个反斜杠，请改变起始与结束标记的反斜杠数量。

    Triple: \\\ \\\ \\\; \..错误
    Triple: \\\\\ \\\ \\\\\; \..正确
## 注释
注释允许在名称之前、名称与冒号之间、对象值起始与末尾、作为值的一般类型字符串和任何单斜杠类型字符串等位置插入。\
单行注释以 `\..` 表示。若位于字符串中，会取消当前行的换行。\
多行注释以 `\. .\` 表示。

    \..这是一个单行注释
    \.这是一个多行注释.\
## 缩进控制
THML规定一个制表符最多占用 4 个空格位置。对齐时以 4 个空格位置为一组。若行前空格位置数不能被 4 整除，则取比这个空格位置小的最大能被 4 整除的空格位置。\
字符串对齐由字符串的主体部分、起始和结束标记和注释共同确定。一般取它们离行首最近的位置，此后字符串以该位置对齐。

    t1:
        \
        tab1
        \
    ;
    t2:
        \
    tab2
        \
    ;
    t3:
    \
        tab3
    \
    ;
    t4:
        \
    \..comment
        tab4
        \
    ;
其中 t2、t3 和 t4的对齐位置相同，均为距离行首0个空格位置。 \
不建议将起始与结束斜杠放在主体内容对齐位置的后面。\
若起始标记左边有非空白字符，则该标记不参与计算对齐。

    \.它们俩的意义相同.\
    foo: \
        bar
        \
    ;
    foo:
        \
        bar
        \
    ;
## 扩展名
　　建议将 `.th` 作为扩展名。
## 可用的解析器
* C# : [我的拙作: THMarkup](https://github.com/l-thoms/THMarkup) \
欢迎编写更优质的解析器。
## ABNF
Coming soon.
$\color{transparent}{这里的ABNF教程太少了，现还在努力研究ABNF，淦！希望有能之人能写出ABNF语法说明。}$